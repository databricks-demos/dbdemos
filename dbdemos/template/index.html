<!doctype html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <!--
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-6YMJB8VLT3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-6YMJB8VLT3');
    </script>
     -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="dbdemos - Databricks Lakehouse demos : {{TITLE}}">
    <title>{{TITLE}}</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <style>
        .list-group-item {
            padding: 0 !important;
            margin: 0 !important;
            border: none !important;
        }

        .notebook_path{
            font-size: 14px;
        }

        .b-example-divider {
            height: 3rem;
            background-color: rgba(0, 0, 0, .1);
            border: solid rgba(0, 0, 0, .15);
            border-width: 1px 0;
            box-shadow: inset 0 .5em 1.5em rgba(0, 0, 0, .1), inset 0 .125em .5em rgba(0, 0, 0, .15);
        }

        .b-example-vr {
            flex-shrink: 0;
            width: 1.5rem;
            height: 91.4vh;
        }

        .bi {
            vertical-align: -.125em;
            fill: currentColor;
        }

        .notebook_description{
            color: #778490;
        }

        .active .notebook_description {
            color: #fff;
        }

        /* Modern Tree-style File Explorer with CSS borders */
        .tree-item {
            position: relative;
            user-select: none;
        }

        /* Tree structure indentation */
        .tree-children {
            position: relative;
            padding-left: 20px;
        }

        /* Vertical line for tree structure - positioned to align with middle of folder icon (16px wide, so middle is at 8px) */
        .tree-children::before {
            content: '';
            position: absolute;
            left: 13px;
            top: 0;
            bottom: 0;
            width: 1px;
            background: #d1d5da;
            z-index: 0;
        }

        /* Horizontal connector line - connects to icon */
        .tree-item-row::before {
            content: '';
            position: absolute;
            left: -7px;
            top: 50%;
            width: 7px;
            height: 1px;
            background: #d1d5da;
        }

        /* Common row styling */
        .tree-item-row {
            position: relative;
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 2px 8px;
            cursor: pointer;
            transition: background-color 0.15s ease;
            font-size: 13px;
            color: #24292e;
        }

        .tree-item-row:hover {
            background-color: #f6f8fa;
        }

        /* Folder styling */
        .folder-row {
            font-weight: 500;
        }

        .folder-icon {
            color: #79b8ff;
            flex-shrink: 0;
            width: 16px;
            height: 16px;
        }

        .folder-name {
            font-weight: 500;
        }

        /* Collapse indicator - change folder icon when collapsed */
        .folder-row:not(.expanded) + .tree-children {
            display: none;
        }

        /* File styling */
        .file-row {
            text-decoration: none;
            color: inherit;
            border: none !important;
        }

        .file-icon {
            flex-shrink: 0;
            width: 16px;
            height: 16px;
            color: #6a737d;
            opacity: 0.8;
        }

        .file-name {
            font-size: 13px;
            font-weight: 400;
            color: #24292e;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* Active file state */
        ._left_menu.active {
            background-color: #0366d6 !important;
            color: #ffffff;
        }

        ._left_menu.active .file-icon {
            color: #ffffff;
            opacity: 1;
            filter: brightness(0) invert(1);
        }

        ._left_menu.active .file-name {
            color: #ffffff;
        }

        /* Root level - no connectors */
        .list-group-flush > .tree-item > .tree-item-row::before {
            display: none;
        }

        /* Smooth scrolling for the file list */
        .list-group-flush {
            overflow-y: auto;
            overflow-x: hidden;
            background: #ffffff;
        }

        .list-group-flush::-webkit-scrollbar {
            width: 8px;
        }

        .list-group-flush::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .list-group-flush::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 4px;
        }

        .list-group-flush::-webkit-scrollbar-thumb:hover {
            background: #a8a8a8;
        }
    </style>


    <!-- Custom styles for this template -->
    <link href="sidebars.css" rel="stylesheet">
</head>
<body>

<div style="padding: 10px; min-height: 130px; " class="border-bottom">
    <div style="float: right; background-color:#f9f7f4; border: 1px solid #eee; padding: 5px">
        <div style="float: right; margin: 00px 0px 0px 30px;">
            <pre style="margin-bottom: 8px;border: 1px solid #e4e4e4;display:block;overflow-x:auto;padding:5px 10px;color:#000;background:#F3F3F3;border-radius:8px"><code style="white-space:pre">%pip install dbdemos</code></pre>
            <pre style="margin-bottom: 0px;border: 1px solid #e4e4e4;display:block;overflow-x:auto;padding:5px 10px;color:#000;background:#F3F3F3;border-radius:8px"><code style="white-space:pre"><span></span><span></span><span style="color:#a71d5d">import</span><span> dbdemos
</span><span>dbdemos.install(</span><span style="color:#183691">'{{DEMO_NAME}}'</span><span>)</span></code></pre>
        </div>

        <div style="text-align: right; float: right; padding: 6px 10px 10px 10px;"><h5>Try this demo in your workspace!</h5> Run the following in your notebook:<br/><small style="color:#8d8d8d"><a  style="color:#8d8d8d" href="https://github.com/databricks-demos/dbdemos/blob/main/LICENSE"  target="_blank">License</a> | <a  style="color:#8d8d8d" target="_blank" href="https://github.com/databricks-demos/dbdemos/blob/main/NOTICE" >Notice</a></small>
        </div>
    </div>

    <a style="float: left" href="https://databricks.com" class="d-flex align-items-center flex-shrink-0 p-3 link-dark text-decoration-none">
        <img src="https://databricks-prod-cloudfront.cloud.databricks.com/static/ddd080df888c63d3c68438635badd32f0c91e40f31fe8fa2ed73da63df3598e3/js/../media/databricks.a424ad6e.svg" alt="databricks-logo" style="width: 200px">
    </a>
    <div style="width: 40%;margin-left: 250px;">
        <h1 style="font-size: 30px; padding-top: 0px">{{TITLE}}</h1>
        {{DESCRIPTION}}
    </div>
</div>

<main class="d-flex flex-nowrap">
    <div class="d-flex flex-column align-items-stretch flex-shrink-0 bg-white" style="width: 350px; overflow: auto; height: 91.4vh;">
        <div class="list-group list-group-flush border-bottom scrollarea">
            {{LEFT_MENU}}
        </div>
    </div>
    <div class="b-example-divider b-example-vr"></div>
    <div style="width: 100%">
        <iframe id="_iframe" style="width: 100%; height: 100%; border: 0px" src=""></iframe>
    </div>
</main>


<script src="/docs/5.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-A3rJD856KowSb7dwlZdYEkO39Gagi7vIsF0jrRAoQmDKKtQBHUuLZ9AsSv4jD4Xa" crossorigin="anonymous"></script>

<script src="sidebars.js"></script>
</body>

<script>
// Listen for navigation messages from iframe (using postMessage API)
window.addEventListener('message', function(event) {
    // Accept messages from any origin for local file:// protocol support
    if (event.data && event.data.type === 'dbdemos-navigate') {
        const targetPath = event.data.targetPath;

        // Update iframe src
        const iframe = document.getElementById('_iframe');
        if (iframe) {
            iframe.src = targetPath;
        }

        // Update left menu selection
        const menuItems = document.querySelectorAll('._left_menu');
        menuItems.forEach(function(item) {
            item.classList.remove('active');
            const itemSrc = item.getAttribute('iframe-src');
            if (itemSrc && itemSrc.endsWith(targetPath)) {
                item.classList.add('active');
            }
        });
    }
});

// Toggle folder expand/collapse
function toggleFolder(folderId) {
    const folderRow = document.querySelector(`[data-folder-id="${folderId}"]`);

    if (folderRow) {
        folderRow.classList.toggle('expanded');
    }
}

(function() {
    function updateMenu() {
        const iframe = document.getElementById("_iframe")
        if (iframe) {
            try {
                // Try to read iframe location (will fail with CORS/file:// protocol)
                const iframeLink = iframe.contentWindow.location.href
                const name = iframeLink.split("/").pop();
                const selection = $('a[iframe-src$="'+name+'"]')
                if (selection.length > 0) {
                    $('._left_menu').removeClass('active')
                    $(selection[0]).addClass('active')
                }
            } catch (e) {
                // CORS/SecurityError - can't access iframe location
                // This is expected with file:// protocol, menu updates via postMessage instead
            }
        }
    }
    //For some reason capturing the change on location doesn't work, instead check every sec :/
    setInterval(updateMenu, 1000);

    // Initialize all folders as expanded
    $('.folder-row').addClass('expanded')

    // Find and select the first file at the root level
    let firstFile = null;

    // Look for the first file at root level (direct child of list-group-flush)
    firstFile = $('.list-group-flush > .tree-item.tree-file ._left_menu').first();

    // If no file found at root, fall back to first file overall
    if (!firstFile || firstFile.length === 0) {
        firstFile = $('._left_menu').first();
    }

    // Select and load the first file
    if (firstFile && firstFile.length > 0) {
        firstFile.addClass('active');
        const src = firstFile.attr('iframe-src');
        if (src) {
            $('#_iframe').attr('src', src);
        }
    }

    $('._left_menu').click(function(e) {
        $('._left_menu').removeClass('active')
        $(this).addClass('active')
        src = $(this).attr("iframe-src")
        $('#_iframe').attr('src', src);
    });
})();

</script>
</html>
